<div class="modal-header">
  <h4 class="modal-title">Détails du Ligne</h4>
  <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body" *ngIf="ligne">
  <c-accordion [alwaysOpen]="true" [flush]="true" class="shadow rounded-2">
    <c-accordion-item #item0="cAccordionItem" [visible]="false">
      <ng-template cTemplateId="accordionHeaderTemplate">
        <button (click)="item0.toggleItem()" [collapsed]="!item0.visible" cAccordionButton>
          Ligne {{ligne.id}} détails
        </button>
      </ng-template>
      <ng-template cTemplateId="accordionBodyTemplate">
        <div class="accordion-body">
          <p><strong>Code:</strong> {{ ligne.code }}</p>
          <p><strong>Type:</strong> {{ ligne.type }}</p>
        </div>
      </ng-template>
    </c-accordion-item>
    <c-accordion-item #item1="cAccordionItem" [visible]="false">
      <ng-template cTemplateId="accordionHeaderTemplate">
        <button (click)="item1.toggleItem()" [collapsed]="!item1.visible" cAccordionButton>
          Moyen de transport associé
        </button>
      </ng-template>
      <ng-template cTemplateId="accordionBodyTemplate">
        <div class="accordion-body">
          <c-col xs="12" *ngIf="ligne.moyenTransport">
            <c-card class="mb-4">
              <c-card-body>
                <table  [striped]="true" cTable hover>
                  <thead>

                  <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Label</th>
                    <th scope="col">Code</th>
                    <th scope="col">Type</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <td>{{ligne.moyenTransport.id}}</td>
                    <td>{{ligne.moyenTransport.label}}</td>
                    <td>{{ligne.moyenTransport.code}}</td>
                    <td>{{ligne.moyenTransport.type}}</td>
                  </tr>
                  </tbody>
                </table>
              </c-card-body>
            </c-card>
          </c-col>
        </div>
      </ng-template>
    </c-accordion-item>
    <c-accordion-item #item2="cAccordionItem" [visible]="false">
      <ng-template cTemplateId="accordionHeaderTemplate">
        <button (click)="item2.toggleItem()" [collapsed]="!item2.visible" cAccordionButton>
          Liste de tous les moyens de transport
        </button>
      </ng-template>
      <ng-template cTemplateId="accordionBodyTemplate">
        <div class="accordion-body">
          <c-col xs="12">
            <c-card class="mb-4">
              <c-card-body>
                <table  [striped]="true" cTable hover>
                  <thead>

                  <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Label</th>
                    <th scope="col">Code</th>
                    <th scope="col">Type</th>
                    <th scope="col">Asigné</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let moyenTransport of allMoyensTransports">
                    <td>{{moyenTransport.id}}</td>
                    <td>{{moyenTransport.label}}</td>
                    <td>{{moyenTransport.code}}</td>
                    <td>{{moyenTransport.type}}</td>
                    <td>
                      <input type="checkbox" [(ngModel)]="moyenTransport.assignedToLigne" [disabled]="moyenTransport.disabled"  (change)="toggleMoyenTransportAssignment(moyenTransport, ligne)">
                    </td>
                  </tr>
                  </tbody>
                </table>
              </c-card-body>
            </c-card>
          </c-col>
        </div>
      </ng-template>
    </c-accordion-item>
  </c-accordion>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="activeModal.dismiss()">Fermer</button>
</div>
